# 제품 요구 사항 문서 (PRD)

## 1. 제품 개요
AI 면접 프로그램은 사용자가 입력한 전화번호를 통해 면접을 시작하고, 음성 인식 및 웹캠을 활용하여 면접 과정을 진행하는 웹 애플리케이션입니다. 이 프로그램은 OpenAI API를 통해 면접 질문을 제공하고, 사용자의 답변을 실시간으로 기록 및 분석합니다.

### 1.1 핵심 기능
- 전화번호 기반 사용자 인증
- 실시간 음성 인식 및 텍스트 변환
- AI 기반 면접 질문 생성
- 웹캠을 통한 면접 영상 녹화
- 면접 내용 실시간 기록 및 저장

## 2. 사용자 요구 사항

### 2.1 사용자 인증
- 사용자는 11자리 전화번호를 입력하여 면접을 시작할 수 있어야 합니다.
- 입력된 전화번호는 서버에서 유효성 검증을 거쳐야 합니다.
- 미등록된 전화번호의 경우 적절한 오류 메시지를 표시해야 합니다.

### 2.2 디바이스 권한
- 면접 시작 전 마이크와 카메라 권한을 명시적으로 요청해야 합니다.
- 권한 거부 시 명확한 안내 메시지와 함께 설정 방법을 제시해야 합니다.
- 모바일 기기에서도 동일한 권한 요청 프로세스가 적용되어야 합니다.

### 2.3 면접 진행
- 사용자는 AI의 질문에 음성으로 답변할 수 있어야 합니다.
- 답변 시작과 종료를 명확히 구분할 수 있는 버튼을 제공해야 합니다.
- 음성 인식 상태를 실시간으로 확인할 수 있어야 합니다.

## 3. 기능 요구 사항

### 3.1 전화번호 입력 시스템
- 숫자 키패드 형식의 입력 인터페이스 제공
- 자동으로 11자리 형식 검증 (010-XXXX-XXXX)
- 입력된 번호의 지우기 기능 제공
- 확인 버튼을 통한 유효성 검증 진행

### 3.2 음성 인식 시스템
- Web Speech API를 활용한 실시간 음성 인식
- 한국어(ko-KR) 기본 지원
- 음성 인식 상태 표시 (대기/인식 중/일시 중지)
- 인식된 텍스트의 실시간 표시

### 3.3 AI 면접관 시스템
- OpenAI API를 활용한 자연스러운 면접 질문 생성
- 답변에 따른 맥락 기반의 후속 질문 생성
- 면접 종료 조건 감지 및 처리
- 면접 내용의 실시간 저장

### 3.4 영상 처리 시스템
- WebRTC를 활용한 웹캠 스트림 처리
- 면접 영상의 실시간 녹화 및 저장
- 영상 품질 최적화 (720p 이상 권장)
- 네트워크 상태에 따른 적응형 스트리밍

## 4. ��기능 요구 사항

### 4.1 성능 요구사항
- 음성 인식 지연 시간: 1초 이내
- AI 응답 생성 시간: 3초 이내
- 영상 녹화 프레임률: 최소 24fps
- 페이지 로딩 시간: 2초 이내

### 4.2 보안 요구사항
- 사용자 데이터 암호화 저장
- HTTPS 프로토콜 사용 필수
- 세션 관리 및 토큰 기반 인증
- 권한 요청 시 명확한 사용 목적 명시

### 4.3 호환성 요구사항
- 지원 브라우저: Chrome 최신 버전, Safari 최신 버전, Firefox 최신 버전
- 반응형 디자인: 모바일/태블릿/데스크톱 지원
- 최소 해상도: 360px x 640px
- PWA 지원 필수

## 5. UI/UX 상세 명세

### 5.1 메인 화면 (전화번호 입력)
- 상단: "AI 면접 프로그램" 타이틀 (폰트: GeistSans, 크기: 4xl)
- 중앙: 전화번호 표시 영역 (배경: gray-100, 둥근 모서리)
- 하단: 숫자 키패드 (3x4 그리드 레이아웃)

#### 5.1.1 키패드 디자인
- 버튼 크기: w-full h-16
- 버튼 스타일: 
  - 배경: blue-500 (hover: blue-600)
  - 텍스트: 흰색, 폰트 크기 3xl
  - 그림자: shadow-lg
  - 둥근 모서리: rounded-xl

#### 5.1.2 확인 버튼
- 크기: w-full py-4
- 스타일:
  - 배경: green-500 (hover: green-600)
  - 텍스트: 흰색, 폰트 크기 2xl
  - 그림자: shadow-lg
  - 둥근 모서리: rounded-xl

### 5.2 면접 진행 화면
- 상단: 웹캠 영상 표시 영역 (16:9 비율)
- 중앙: AI 질문 및 답변 표시 영역
- 하단: 제어 버튼 영역

#### 5.2.1 답변 제어 버튼
- "답변 시작" 버튼:
  - 배경: green-500
  - 크기: w-48 h-16
  - 텍스트: 흰색, 폰트 크기 4xl
- "답변 종료" 버튼:
  - 배경: red-500
  - 크기: w-48 h-16
  - 텍스트: 흰색, 폰트 크기 4xl

#### 5.2.2 상태 표시
- AI 응답 중: 파란색 펄스 애니메이션
- 음성 인식 중: 빨간색 펄스 애니메이션
- 텍스트 표시: gray-600, 폰트 크기 2xl

## 6. 기술 스택

### 6.1 프론트엔드
- Framework: Next.js 14
- UI Library: React 18
- Styling: Tailwind CSS
- 상태 관리: React Context API

### 6.2 백엔드
- Runtime: Node.js
- Framework: Next.js API Routes
- 데이터베이스: Webhook 기반 외부 시스템 연동

### 6.3 외부 서비스
- AI: OpenAI API (GPT-4)
- 음성 인식: Web Speech API
- 영상 처리: WebRTC
- 파일 저장: Dropbox API

## 7. 배포 요구사항
- Platform: Vercel
- Environment: Production/Development 구분
- 환경 변수 관리: .env.local 사용
- 모니터링: Vercel Analytics 통합

## 8. 프로젝트 일정
1주차: 요구사항 분석 및 설계
- Day 1-2: 기술 스택 선정 및 개발 ��경 구성
- Day 3-5: UI/UX 디자인 및 프로토타입 제작

2주차: 프론트엔드 개발
- Day 1-2: 전화번호 입력 화면 구현
- Day 3-4: 면접 진행 화면 구현
- Day 5: 음성 인식 및 웹캠 통합

3주차: 백엔드 개발 및 API 통합
- Day 1-2: OpenAI API 통합
- Day 3-4: Webhook 시스템 구현
- Day 5: 영상 저장 시스템 구현

4주차: 테스트 및 배포
- Day 1-2: 통합 테스트
- Day 3: 버그 수정
- Day 4-5: 배포 및 모니터링 설정

## 현재 개발 현황 (2024-03-21 업데이트)

### 완료된 작업:
- [x] 초기 프로젝트 설정
- [x] 기본 컴포넌트 구조 설계
- [x] 파일 구조 설정
- [x] 다크모드 지원
- [x] 기본 UI/UX 디자인 구현
- [x] 전화번호 입력 화면 구현
  - [x] 숫자 키패드 디자인
  - [x] 전화번호 포맷팅
  - [x] 유효성 검증
  - [x] 햅틱 피드백
- [x] 면접 준비 화면 구현
  - [x] 디바이스 권한 체크
  - [x] 마이크/카메라 테스트
  - [x] 진행 상태 표시
- [x] 면접 세션 화면 구현
  - [x] 음성 인식 통합
  - [x] 웹캠 프리뷰
  - [x] 실시간 텍스트 표시
  - [x] 진행 상태 표시
- [x] AI 면접관 기능 구현
  - [x] OpenAI Assistant 통합
  - [x] 맥락 기반 질문 생성
  - [x] 대화 흐름 관리
- [x] Webhook 시스템 구현
  - [x] 면접 데이터 전송
  - [x] 에러 핸들링
  - [x] 재시도 로직

### 진행 중인 작업:
- [ ] 음성 합성 기능
  - [x] ElevenLabs API 통합
  - [ ] 음성 캐싱 시스템
  - [ ] 오디오 재생 제어
- [ ] 웹캠 녹화 기능
  - [x] MediaRecorder 구현
  - [ ] 청크 단위 저장
  - [ ] 영상 포맷 최적화
- [ ] 면접 결과 분석
  - [x] 기본 분석 로직
  - [ ] 상세 피드백 생성
  - [ ] 점수 산정 시스템

### 다음 개발 계획:
- [ ] 성능 최적화
  - [ ] 메모리 사용량 개선
  - [ ] 로딩 상태 최적화
  - [ ] 네트워크 요청 최소화
- [ ] 오류 처리 강화
  - [ ] 네트워크 오류 복구
  - [ ] 디바이스 권한 재요청
  - [ ] 사용자 피드백 개선
- [ ] 모바일 대응
  - [ ] 터치 인터랙션 개선
  - [ ] 반응형 레이아웃 보완
  - [ ] 모바일 성능 최적화

### 알려진 이슈:
1. Safari 브라우저에서 간헐적인 음성 인식 중단
2. 느린 네트워크에서 AI 응답 지연
3. 메모리 사용량 최적화 필요
4. 일부 모바일 기기에서 웹캠 프리뷰 화질 저하

### 다음 마일스톤:
1. 음성 합성 시스템 완성 (예정: 2024-03-25)
2. 웹캠 녹화 안정화 (예정: 2024-03-28)
3. 면접 결과 분석 고도화 (예정: 2024-04-01)

## UI/UX 개선사항 (2차)

### 면접 세션 화면
1. **질문 표시 영역**
   - 명확한 타이포그래피
   - 단계별 진행 상태
   - 부드러운 전환 효과
   - 읽기 쉬운 레이아웃

2. **답변 영역**
   - 실시간 음성 인식 시각화
   - 답변 시간 표시
   - 진행 상태 피드백
   - 직관적인 제어 버튼

3. **피드백 시스템**
   - 실시간 상태 표시
   - 오류 알림
   - 진행 단계 표시
   - 사용자 가이드

